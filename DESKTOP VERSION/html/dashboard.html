<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Finanza Desktop</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='%23667eea'/><text x='50' y='60' text-anchor='middle' fill='white' font-size='40' font-weight='bold'>F</text></svg>">
    <!-- Firebase SDK compat -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div id="sidebar"></div>
        
        <div class="main-content">
            <!-- Header -->
            <div id="header"></div>
            
            <!-- Estatísticas/resumo financeiro -->
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card">
                    <div class="stat-value stat-balance">R$ 5.000,00</div>
                    <div class="stat-label">Saldo Total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value stat-income">R$ 2.500,00</div>
                    <div class="stat-label">Receitas do Mês</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value stat-expense">R$ 1.200,00</div>
                    <div class="stat-label">Despesas do Mês</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value stat-accounts">3</div>
                    <div class="stat-label">Contas cadastradas</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Resumo Financeiro</h2>
                </div>
                <div id="financialSummary">
                    <p>Você possui <strong>3</strong> contas cadastradas.</p>
                    <p>Neste mês você teve <strong>R$ 2.500,00</strong> em receitas e <strong>R$ 1.200,00</strong> em despesas.</p>
                    <p>Seu saldo atual é de <strong>R$ 5.000,00</strong>.</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuração real do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAtmg3jhdlvF_GJmfLRt_bHCGRw_nWSMCo",
            authDomain: "finanza-2cd68.firebaseapp.com",
            databaseURL: "https://finanza-2cd68-default-rtdb.firebaseio.com",
            projectId: "finanza-2cd68",
            storageBucket: "finanza-2cd68.appspot.com",
            messagingSenderId: "991299806624",
            appId: "1:991299806624:web:12782bf4a0ab6ed52630c5",
            measurementId: "G-M1TCD97PRW"
        };
        firebase.initializeApp(firebaseConfig);

        // Sidebar com botões navegáveis e ícones SVG
        function generateSidebar(user) {
            return `
                <div class="sidebar">
                    <div class="sidebar-logo">
                        <img src="../IMAGENS/logo.png" alt="Logo Finanza" class="logo-small" />
                        <h2>Finanza</h2>
                    </div>
                    <div class="sidebar-user mb-4">
                        <span>${user?.email || 'Usuário'}</span>
                    </div>
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a href="dashboard.html" class="nav-link active">
                                <span class="nav-icon">
                                    <!-- Dashboard icon -->
                                    <svg width="24" height="24" fill="none"><rect x="3" y="3" width="7" height="7" rx="2" fill="#667eea"/><rect x="14" y="3" width="7" height="7" rx="2" fill="#667eea"/><rect x="14" y="14" width="7" height="7" rx="2" fill="#667eea"/><rect x="3" y="14" width="7" height="7" rx="2" fill="#667eea"/></svg>
                                </span>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="accounts.html" class="nav-link">
                                <span class="nav-icon">
                                    <!-- Accounts icon -->
                                    <svg width="24" height="24" fill="none"><path d="M12 4a4 4 0 110 8 4 4 0 010-8z" stroke="#48bb78" stroke-width="2"/><path d="M4 20v-2a4 4 0 014-4h8a4 4 0 014 4v2" stroke="#667eea" stroke-width="2"/></svg>
                                </span>
                                Contas
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="transactions.html" class="nav-link">
                                <span class="nav-icon">
                                    <!-- Transactions icon -->
                                    <svg width="24" height="24" fill="none"><path d="M5 12h14M12 5l7 7-7 7" stroke="#ed8936" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                </span>
                                Transações
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="profile.html" class="nav-link">
                                <span class="nav-icon">
                                    <!-- Profile icon -->
                                    <svg width="24" height="24" fill="none"><circle cx="12" cy="8" r="4" stroke="#764ba2" stroke-width="2"/><path d="M4 20v-2a4 4 0 014-4h8a4 4 0 014 4v2" stroke="#667eea" stroke-width="2"/></svg>
                                </span>
                                Perfil
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="admin.html" class="nav-link">
                                <span class="nav-icon">
                                    <!-- Admin icon -->
                                    <svg width="24" height="24" fill="none"><circle cx="12" cy="12" r="10" stroke="#c53030" stroke-width="2"/><path d="M12 6v6l4 2" stroke="#c53030" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                </span>
                                Admin
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link" id="logoutBtn">
                                <span class="nav-icon">
                                    <!-- Logout icon -->
                                    <svg width="24" height="24" fill="none"><path d="M16 17l5-5m0 0l-5-5m5 5H9" stroke="#f56565" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M4 4h7v16H4V4z" stroke="#718096" stroke-width="2"/></svg>
                                </span>
                                Sair
                            </a>
                        </li>
                    </ul>
                </div>
            `;
        }
        function generateHeader(title, user) {
            return `
                <div class="header">
                    <h1>${title}</h1>
                    <span>${user?.email || 'Usuário'}</span>
                </div>
            `;
        }

        document.addEventListener('DOMContentLoaded', function () {
            firebase.auth().onAuthStateChanged(function(user) {
                if (!user) {
                    setTimeout(() => {
                        window.location.href = "login.html";
                    }, 200);
                    return;
                }
                document.getElementById('sidebar').innerHTML = generateSidebar(user);
                document.getElementById('header').innerHTML = generateHeader('Dashboard', user);

                document.getElementById('logoutBtn').addEventListener('click', async (e) => {
                    e.preventDefault();
                    await firebase.auth().signOut();
                    window.location.href = "login.html";
                });
            });
        });
    </script>
</body>
</html>